<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STAR SABRE</title>
    <meta name="description" content="Play Demo">
    <meta property="og:title" content="Star Sabre">
    <meta property="og:description" content="Play Demo">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/png" href="images/BlackHole.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="scanlines"></div>

    <div id="game-wrapper">
        <canvas id="gameCanvas"></canvas>
        <div id="player-aura" class="hidden"></div>
        
        <div id="ui-layer">
            <div class="hud-top">
                <div class="hud-item">SECTOR <span id="floor-display" class="neon-text">1</span></div>
                <div class="hud-item">ESSENCE <span id="essence-display" class="neon-text">0</span></div>
            </div>

            <div id="boss-warning" class="hidden">WARNING: TITAN INCOMING</div>
            <div id="powerup-warning" class="hidden">POWER-UP ACQUIRED</div>

            <div id="bottom-controls">
                                <button class="secondary-btn corner-btn left" onclick="togglePause()" id="pause-btn" aria-label="Pause">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-7.5-13.5v13.5" />
                                        </svg>
                                </button>
                                                                <div class="bottom-center">
                                                                        <button class="secondary-btn control-btn" id="sfx-mute-btn" onclick="toggleSfxMute()" aria-label="Toggle SFX">
                                                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z" />
</svg>
</button>
                                                             <button class="secondary-btn control-btn" id="music-mute-btn" onclick="toggleMusicMute()" aria-label="Toggle Music">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z" />
</svg>
</button>
                                                                     </div>
        <button class="secondary-btn corner-btn right" onclick="restartRun()" id="restart-btn" aria-label="Restart">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
        </svg>
        </button>
        </div>

            <div id="splash-screen" class="reset-modal">
                <div class="reset-dialog" id="splash-dialog">
                    <h1 class="glitch-text" data-text="STAR SABRE">STAR SABRE</h1>
                    <p class="subtitle">PROJECT: OVERDRIVE</p>
                    <div class="reset-actions">
                        <button class="mega-btn" id="splash-play-btn" aria-label="Play">PLAY</button>
                    </div>
                </div>
            </div>

            <div id="start-screen" class="modal hidden">
                <h1 class="glitch-text" data-text="STAR SABRE">STAR SABRE</h1>
                <h2 class="subtitle">PROJECT: OVERDRIVE</h2>
                
                <h2>-UPGRADES-</h2>
                <p class="menu-info">STORED ESSENCE: <span id="meta-essence-display" class="neon-text">0</span></p>

                <div class="shop-grid">
                    <div class="shop-item" onclick="buyUpgrade('dmg')">
                        <div class="shop-label">IMPACT</div>
                        <div class="shop-level"><span id="lvl-dmg" class="neon-text">LVL 0</span></div>
                        <div class="shop-cost" id="cost-dmg">2 ESSENCE</div>
                    </div>
                    <div class="shop-item" onclick="buyUpgrade('rate')">
                        <div class="shop-label">FIRE RATE</div>
                        <div class="shop-level"><span id="lvl-rate" class="neon-text">LVL 0</span></div>
                        <div class="shop-cost" id="cost-rate">2 ESSENCE</div>
                    </div>
                    <div class="shop-item" onclick="buyUpgrade('charge')">
                        <div class="shop-label">CHARGE SPEED</div>
                        <div class="shop-level"><span id="lvl-hp" class="neon-text">LVL 0</span></div>
                        <div class="shop-cost" id="cost-hp">2 ESSENCE</div>
                     </div>
                    <div class="shop-item" id="shop-support" onclick="buyUpgrade('support')">
                        <div class="shop-label">CANNON DRONE</div>
                        <div class="shop-level"><span id="lvl-support" class="neon-text">LVL 0</span></div>
                        <div class="shop-cost" id="cost-support">1000 ESSENCE</div>
                     </div>
                </div>

                <div class="shop-actions">
                    <button class="secondary-btn" onclick="openResetConfirm()">RESET UPGRADES</button>
                </div>

                <div id="reset-confirm" class="reset-modal hidden">
                    <div class="reset-dialog">
                        <h4>RESET UPGRADES</h4>
                        <p>60% of spent Essence will be refunded and all upgrade levels will be reset.</p>
                        <div class="reset-actions">
                            <button class="secondary-btn" id="reset-cancel-btn">CANCEL</button>
                            <button class="mega-btn" id="reset-confirm-btn">CONFIRM</button>
                        </div>
                    </div>
                </div>

                <p id="high-score"><span class="record-label">RECORD: </span><span id="record-floor" class="record-value">0</span></p>
                                <div class="launch-row">
                                    <button id="skins-btn" class="icon-btn left" onclick="openSkins()" aria-label="Character Skins" title="Character Skins">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42" />
                                        </svg>
                                    </button>
                                        <button class="mega-btn" onclick="beginLaunch()">LAUNCH</button>
                                        <button id="accessibility-btn" class="icon-btn right" onclick="openAccessibility()" aria-label="Accessibility Options" title="Accessibility Options">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                                </svg>
                                        </button>
                                </div>

                <div class="controls-panel">
                    <h4>CONTROLS</h4>
                    <div class="control-line">WASD = Move</div>
                    <div class="control-line">SHIFT = Dodge</div>
                    <div class="control-line">Q / Tap = Lock-on</div>
                    <div class="control-line">Space = Pause</div>
                    <div class="control-line">E = BLAST</div>
                    <div class="control-line">1 = BOMB</div>
                    <div class="control-line">2 = BEAM</div>
                    <div class="control-line">3 = BURST</div>
                </div>
            </div>

            <div id="draft-screen" class="modal hidden">
                <h2 class="neon-text">REINFORCEMENTS</h2>
                <p class="menu-info">CURRENT ESSENCE: <span id="run-essence-display" class="neon-text">0</span></p>
                <div class="cards-container" id="draft-cards"></div>
                <div class="draft-footer">
                
                    <button class="secondary-btn" onclick="skipDraft()">REPAIR UNIT (SKIP)</button>
                </div>
            </div>

            <div id="game-over" class="modal hidden">
                <h2 class="neon-text">UNIT DESTROYED</h2>
                <p>FINAL SECTOR: <span id="final-floor" class="neon-text">0</span></p>
                <p>TOTAL KILLS: <span id="total-kills" class="neon-text">0</span></p>
                <p>ESSENCE EARNED: <span id="essence-earned" class="neon-text">0</span></p>
                <p>TOTAL ESSENCE: <span id="total-essence" class="neon-text">0</span></p>
                <div class="shop-actions game-over-actions">
                    <button class="secondary-btn" onclick="closeGameOver()">MAIN MENU</button>
                </div>
            </div>

            <div id="accessibility-modal" class="reset-modal hidden">
                <div class="reset-dialog">
                    <h4>ACCESSIBILITY</h4>
                    <div class="acc-row">
                        <label class="acc-label">Joycon Position</label>
                        <div class="segmented">
                            <button class="secondary-btn" id="joy-left-btn">Left</button>
                            <button class="secondary-btn" id="joy-right-btn">Right</button>
                        </div>
                    </div>
                    <div class="acc-row">
                        <label class="acc-label" for="move-sens" id="move-sens-label">Movement Sensitivity</label>
                        <input id="move-sens" type="range" min="1" max="5" step="1" value="3" aria-labelledby="move-sens-label move-sens-val" title="Movement Sensitivity" />
                        <div class="value-row"><span id="move-sens-val">3</span></div>
                        <div class="scale-labels" aria-hidden="true"></div>
                    </div>
                    <div class="acc-row">
                        <label class="acc-label" for="shake-level" id="shake-level-label">Camera Shake</label>
                        <input id="shake-level" type="range" min="1" max="5" step="1" value="3" aria-labelledby="shake-level-label shake-level-val" title="Camera Shake" />
                        <div class="value-row"><span id="shake-level-val">3</span></div>
                        <div class="scale-labels" aria-hidden="true"></div>
                    </div>
                    <div class="acc-row">
                        <label class="acc-label" for="sfx-level" id="sfx-level-label">Sound Volume</label>
                        <input id="sfx-level" type="range" min="1" max="5" step="1" value="5" aria-labelledby="sfx-level-label sfx-level-val" title="Sound Effects Volume" />
                        <div class="value-row"><span id="sfx-level-val">5</span></div>
                        <div class="scale-labels" aria-hidden="true"></div>
                    </div>
                    <div class="acc-row">
                        <label class="acc-label" for="music-level" id="music-level-label">Music Volume</label>
                        <input id="music-level" type="range" min="1" max="5" step="1" value="5" aria-labelledby="music-level-label music-level-val" title="Music Volume" />
                        <div class="value-row"><span id="music-level-val">5</span></div>
                        <div class="scale-labels" aria-hidden="true"></div>
                    </div>
                    <div class="reset-actions">
                        <button class="secondary-btn" id="acc-close-btn">CLOSE</button>
                    </div>
                </div>
            </div>

            <div id="skins-modal" class="reset-modal hidden" aria-labelledby="skins-title" role="dialog">
                <div class="reset-dialog">
                    <h4 id="skins-title">CHARACTER SKINS</h4>
                    <div class="acc-row" id="skin-status-row">
                        <label class="acc-label" id="skin-status-label">Select a skin to equip</label>
                    </div>
                    <div class="acc-row" id="skins-grid-row">
                        <div class="skins-grid" role="list">
                            <div class="skin-card" role="listitem" data-skin="STARCORE" data-cost="500" tabindex="0" aria-label="STARCORE, 500 Essence">
                                <img src="skins/STARCORE.png" alt="STARCORE skin preview" />
                                <div class="skin-name">STARCORE</div>
                                <div class="skin-cost">500 ESSENCE</div>
                            </div>
                            <div class="skin-card" role="listitem" data-skin="MOONLIGHT" data-cost="700" tabindex="0" aria-label="MOONLIGHT, 700 Essence">
                                <img src="skins/MOONLIGHT.png" alt="MOONLIGHT skin preview" />
                                <div class="skin-name">MOONLIGHT</div>
                                <div class="skin-cost">700 ESSENCE</div>
                            </div>
                            <div class="skin-card" role="listitem" data-skin="DARKMATTER" data-cost="900" tabindex="0" aria-label="DARKMATTER, 900 Essence">
                                <img src="skins/DARKMATTER.png" alt="DARKMATTER skin preview" />
                                <div class="skin-name">DARKMATTER</div>
                                <div class="skin-cost">900 ESSENCE</div>
                            </div>
                        </div>
                    </div>
                    <div class="reset-actions">
                        <button class="secondary-btn" id="skins-close-btn" onclick="closeSkins()">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>